{"ast":null,"code":"var _jsxFileName = \"E:\\\\QuanLyKiosk\\\\client\\\\src\\\\Pages\\\\KioskPlanPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/Pages/KioskPlanPage.js\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { getAllPlans, deletePlan, importExcel, createPlan } from \"../services/kioskPlanApi\";\nimport KioskPlanTable from \"../Components/KioskPlanTable\";\nimport ImportExcelButton from \"../Components/ImportExcelButton\";\n\n/* ---------------------- CreatePlanForm (inline) ---------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreatePlanForm = ({\n  onSubmit,\n  onCancel\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    hospitalName: \"\",\n    quantity: \"\",\n    readerType: \"\",\n    deviceType: \"\",\n    responsiblePerson: \"\",\n    priority: \"\"\n  });\n  const [submitting, setSubmitting] = useState(false);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setSubmitting(true);\n      await onSubmit(formData);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"mb-4 p-4 border rounded bg-gray-50 space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"hospitalName\",\n        value: formData.hospitalName,\n        onChange: handleChange,\n        placeholder: \"T\\xEAn b\\u1EC7nh vi\\u1EC7n\",\n        className: \"border px-2 py-1 rounded w-1/3\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"quantity\",\n        value: formData.quantity,\n        onChange: handleChange,\n        placeholder: \"S\\u1ED1 l\\u01B0\\u1EE3ng\",\n        className: \"border px-2 py-1 rounded w-1/6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"readerType\",\n        value: formData.readerType,\n        onChange: handleChange,\n        placeholder: \"Lo\\u1EA1i \\u0111\\u1EA7u \\u0111\\u1ECDc CCCD\",\n        className: \"border px-2 py-1 rounded w-1/4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"deviceType\",\n        value: formData.deviceType,\n        onChange: handleChange,\n        placeholder: \"Lo\\u1EA1i thi\\u1EBFt b\\u1ECB\",\n        className: \"border px-2 py-1 rounded w-1/4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"priority\",\n        value: formData.priority,\n        onChange: handleChange,\n        placeholder: \"M\\u1EE9c \\u0111\\u1ED9 \\u01B0u ti\\xEAn\",\n        className: \"border px-2 py-1 rounded w-1/4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"responsiblePerson\",\n        value: formData.responsiblePerson,\n        onChange: handleChange,\n        placeholder: \"Ng\\u01B0\\u1EDDi ph\\u1EE5 tr\\xE1ch\",\n        className: \"border px-2 py-1 rounded w-1/4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: submitting,\n        className: `px-4 py-1 rounded text-white ${submitting ? \"bg-green-400 cursor-not-allowed\" : \"bg-green-500\"}`,\n        children: submitting ? \"Đang lưu...\" : \"Lưu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        disabled: submitting,\n        className: \"bg-gray-300 px-4 py-1 rounded\",\n        children: \"Hu\\u1EF7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n/* -------------------- End CreatePlanForm (inline) -------------------- */\n_s(CreatePlanForm, \"wO6SNzh1SH1NFto1cbKXjcebWB0=\");\n_c = CreatePlanForm;\nconst KioskPlanPage = () => {\n  _s2();\n  const [plans, setPlans] = useState([]);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [importing, setImporting] = useState(false);\n  const navigate = useNavigate();\n  const fetchPlans = async () => {\n    try {\n      setLoading(true);\n      const res = await getAllPlans();\n      const filtered = res.data.filter(p => {\n        var _p$hospitalName;\n        return (_p$hospitalName = p.hospitalName) === null || _p$hospitalName === void 0 ? void 0 : _p$hospitalName.trim();\n      });\n      const sorted = filtered.sort((a, b) => {\n        const aStt = Number(a.stt);\n        const bStt = Number(b.stt);\n        if (isNaN(aStt)) return 1; // đưa a xuống cuối nếu không có số\n        if (isNaN(bStt)) return -1; // đưa b xuống cuối nếu không có số\n\n        return aStt - bStt;\n      });\n      setPlans(sorted);\n    } catch (err) {\n      console.error(\"Lỗi khi fetch plans:\", err);\n      Swal.fire(\"Lỗi\", \"Không tải được danh sách kế hoạch.\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Xoá: gọi API + cập nhật state + trả true/false cho Table để hiển thị thông báo\n  const handleDelete = async id => {\n    try {\n      await deletePlan(id);\n      setPlans(prev => prev.filter(p => p._id !== id));\n      return true; // Table sẽ hiển thị \"Đã xoá!\"\n    } catch (err) {\n      Swal.fire(\"Lỗi\", \"Xoá thất bại. Vui lòng thử lại.\", \"error\");\n      return false;\n    }\n  };\n  const handleFileUpload = async file => {\n    const validTypes = [\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    // .xlsx\n    \"application/vnd.ms-excel\" // .xls\n    ];\n    if (!validTypes.includes(file.type)) {\n      Swal.fire(\"Lỗi\", \"Chỉ chấp nhận file Excel (.xlsx hoặc .xls).\", \"error\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      var _res$data;\n      setImporting(true);\n      const res = await importExcel(formData);\n\n      // Kiểm tra server trả về lỗi không hợp lệ\n      if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.invalidFormat) {\n        Swal.fire(\"Lỗi\", \"File Excel không đúng định dạng hoặc thiếu trường dữ liệu.\", \"error\");\n      } else {\n        await fetchPlans();\n        Swal.fire(\"Thành công\", \"Import Excel thành công.\", \"success\");\n      }\n    } catch (err) {\n      Swal.fire(\"Lỗi\", \"Import Excel thất bại.\", \"error\");\n    } finally {\n      setImporting(false);\n    }\n  };\n  const handleCreateNew = async form => {\n    try {\n      await createPlan({\n        hospitalName: form.hospitalName,\n        quantity: form.quantity,\n        cccdReaderType: form.readerType,\n        deviceType: form.deviceType,\n        priorityLevel: form.priority,\n        personInCharge: form.responsiblePerson\n      });\n      setShowCreateForm(false);\n      await fetchPlans();\n      Swal.fire(\"Thành công\", \"Đã tạo kế hoạch mới.\", \"success\");\n    } catch (err) {\n      Swal.fire(\"Lỗi\", \"Tạo kế hoạch thất bại. Vui lòng thử lại.\", \"error\");\n    }\n  };\n  const handleView = plan => {\n    navigate(`/kiosk-plans/${plan._id}`, {\n      state: {\n        plan\n      }\n    });\n  };\n  useEffect(() => {\n    fetchPlans();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 text-gray-800\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold\",\n        children: \"Qu\\u1EA3n l\\xFD k\\u1EBF ho\\u1EA1ch Kiosk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 7\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm text-gray-500\",\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap justify-end items-center gap-2 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(ImportExcelButton, {\n        onFileSelect: handleFileUpload,\n        disabled: importing,\n        className: \"bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/kiosk-plans/create\"),\n        className: \"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60\",\n        disabled: loading || importing,\n        children: \"\\u2795 T\\u1EA1o m\\u1EDBi k\\u1EBF ho\\u1EA1ch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 5\n    }, this), importing && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 text-sm text-gray-500 text-right\",\n      children: \"\\u0110ang import...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), showCreateForm && /*#__PURE__*/_jsxDEV(CreatePlanForm, {\n      onSubmit: handleCreateNew,\n      onCancel: () => setShowCreateForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(KioskPlanTable, {\n      data: plans,\n      onDelete: handleDelete,\n      onEdit: plan => console.log(\"Edit:\", plan),\n      onView: handleView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 3\n  }, this);\n};\n_s2(KioskPlanPage, \"Gie6oxdBRo4btL7HDSqX/kKOt0o=\", false, function () {\n  return [useNavigate];\n});\n_c2 = KioskPlanPage;\nexport default KioskPlanPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"CreatePlanForm\");\n$RefreshReg$(_c2, \"KioskPlanPage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Swal","getAllPlans","deletePlan","importExcel","createPlan","KioskPlanTable","ImportExcelButton","jsxDEV","_jsxDEV","CreatePlanForm","onSubmit","onCancel","_s","formData","setFormData","hospitalName","quantity","readerType","deviceType","responsiblePerson","priority","submitting","setSubmitting","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","className","children","type","onChange","placeholder","required","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onClick","_c","KioskPlanPage","_s2","plans","setPlans","showCreateForm","setShowCreateForm","loading","setLoading","importing","setImporting","navigate","fetchPlans","res","filtered","data","filter","p","_p$hospitalName","trim","sorted","sort","a","b","aStt","Number","stt","bStt","isNaN","err","console","error","fire","handleDelete","id","_id","handleFileUpload","file","validTypes","includes","FormData","append","_res$data","invalidFormat","handleCreateNew","form","cccdReaderType","priorityLevel","personInCharge","handleView","plan","state","onFileSelect","onDelete","onEdit","log","onView","_c2","$RefreshReg$"],"sources":["E:/QuanLyKiosk/client/src/Pages/KioskPlanPage.js"],"sourcesContent":["// src/Pages/KioskPlanPage.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport {\r\n  getAllPlans,\r\n  deletePlan,\r\n  importExcel,\r\n  createPlan,\r\n} from \"../services/kioskPlanApi\";\r\nimport KioskPlanTable from \"../Components/KioskPlanTable\";\r\nimport ImportExcelButton from \"../Components/ImportExcelButton\";\r\n\r\n/* ---------------------- CreatePlanForm (inline) ---------------------- */\r\nconst CreatePlanForm = ({ onSubmit, onCancel }) => {\r\n  const [formData, setFormData] = useState({\r\n    hospitalName: \"\",\r\n    quantity: \"\",\r\n    readerType: \"\",\r\n    deviceType: \"\",\r\n    responsiblePerson: \"\",\r\n    priority: \"\",\r\n  });\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setSubmitting(true);\r\n      await onSubmit(formData);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"mb-4 p-4 border rounded bg-gray-50 space-y-2\"\r\n    >\r\n      <div className=\"flex flex-wrap gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"hospitalName\"\r\n          value={formData.hospitalName}\r\n          onChange={handleChange}\r\n          placeholder=\"Tên bệnh viện\"\r\n          className=\"border px-2 py-1 rounded w-1/3\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          name=\"quantity\"\r\n          value={formData.quantity}\r\n          onChange={handleChange}\r\n          placeholder=\"Số lượng\"\r\n          className=\"border px-2 py-1 rounded w-1/6\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"readerType\"\r\n          value={formData.readerType}\r\n          onChange={handleChange}\r\n          placeholder=\"Loại đầu đọc CCCD\"\r\n          className=\"border px-2 py-1 rounded w-1/4\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"deviceType\"\r\n          value={formData.deviceType}\r\n          onChange={handleChange}\r\n          placeholder=\"Loại thiết bị\"\r\n          className=\"border px-2 py-1 rounded w-1/4\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"priority\"\r\n          value={formData.priority}\r\n          onChange={handleChange}\r\n          placeholder=\"Mức độ ưu tiên\"\r\n          className=\"border px-2 py-1 rounded w-1/4\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"responsiblePerson\"\r\n          value={formData.responsiblePerson}\r\n          onChange={handleChange}\r\n          placeholder=\"Người phụ trách\"\r\n          className=\"border px-2 py-1 rounded w-1/4\"\r\n        />\r\n      </div>\r\n      <div className=\"flex gap-2 mt-2\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={submitting}\r\n          className={`px-4 py-1 rounded text-white ${submitting ? \"bg-green-400 cursor-not-allowed\" : \"bg-green-500\"\r\n            }`}\r\n        >\r\n          {submitting ? \"Đang lưu...\" : \"Lưu\"}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          disabled={submitting}\r\n          className=\"bg-gray-300 px-4 py-1 rounded\"\r\n        >\r\n          Huỷ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n/* -------------------- End CreatePlanForm (inline) -------------------- */\r\n\r\nconst KioskPlanPage = () => {\r\n  const [plans, setPlans] = useState([]);\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchPlans = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await getAllPlans();\r\n\r\n      const filtered = res.data.filter(p => p.hospitalName?.trim());\r\n\r\n      const sorted = filtered.sort((a, b) => {\r\n        const aStt = Number(a.stt);\r\n        const bStt = Number(b.stt);\r\n\r\n        if (isNaN(aStt)) return 1; // đưa a xuống cuối nếu không có số\r\n        if (isNaN(bStt)) return -1; // đưa b xuống cuối nếu không có số\r\n\r\n        return aStt - bStt;\r\n      });\r\n\r\n      setPlans(sorted);\r\n    } catch (err) {\r\n      console.error(\"Lỗi khi fetch plans:\", err);\r\n      Swal.fire(\"Lỗi\", \"Không tải được danh sách kế hoạch.\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Xoá: gọi API + cập nhật state + trả true/false cho Table để hiển thị thông báo\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deletePlan(id);\r\n      setPlans((prev) => prev.filter((p) => p._id !== id));\r\n      return true; // Table sẽ hiển thị \"Đã xoá!\"\r\n    } catch (err) {\r\n      Swal.fire(\"Lỗi\", \"Xoá thất bại. Vui lòng thử lại.\", \"error\");\r\n      return false;\r\n    }\r\n  };\r\n\r\nconst handleFileUpload = async (file) => {\r\n  const validTypes = [\r\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", // .xlsx\r\n    \"application/vnd.ms-excel\", // .xls\r\n  ];\r\n\r\n  if (!validTypes.includes(file.type)) {\r\n    Swal.fire(\"Lỗi\", \"Chỉ chấp nhận file Excel (.xlsx hoặc .xls).\", \"error\");\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append(\"file\", file);\r\n\r\n  try {\r\n    setImporting(true);\r\n    const res = await importExcel(formData);\r\n\r\n    // Kiểm tra server trả về lỗi không hợp lệ\r\n    if (res?.data?.invalidFormat) {\r\n      Swal.fire(\"Lỗi\", \"File Excel không đúng định dạng hoặc thiếu trường dữ liệu.\", \"error\");\r\n    } else {\r\n      await fetchPlans();\r\n      Swal.fire(\"Thành công\", \"Import Excel thành công.\", \"success\");\r\n    }\r\n  } catch (err) {\r\n    Swal.fire(\"Lỗi\", \"Import Excel thất bại.\", \"error\");\r\n  } finally {\r\n    setImporting(false);\r\n  }\r\n};\r\n\r\n  const handleCreateNew = async (form) => {\r\n    try {\r\n      await createPlan({\r\n        hospitalName: form.hospitalName,\r\n        quantity: form.quantity,\r\n        cccdReaderType: form.readerType,\r\n        deviceType: form.deviceType,\r\n        priorityLevel: form.priority,\r\n        personInCharge: form.responsiblePerson,\r\n      });\r\n      setShowCreateForm(false);\r\n      await fetchPlans();\r\n      Swal.fire(\"Thành công\", \"Đã tạo kế hoạch mới.\", \"success\");\r\n    } catch (err) {\r\n      Swal.fire(\"Lỗi\", \"Tạo kế hoạch thất bại. Vui lòng thử lại.\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleView = (plan) => {\r\n    navigate(`/kiosk-plans/${plan._id}`, { state: { plan } });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPlans();\r\n  }, []);\r\n\r\n return (\r\n  <div className=\"p-6 text-gray-800\">\r\n    <div className=\"mb-4 flex items-center justify-between\">\r\n      <h2 className=\"text-xl font-semibold\">Quản lý kế hoạch Kiosk</h2>\r\n      {loading && <span className=\"text-sm text-gray-500\">Đang tải...</span>}\r\n    </div>\r\n\r\n    {/* Nút tạo và import: gom chung phải màn hình */}\r\n    <div className=\"flex flex-wrap justify-end items-center gap-2 mb-4\">\r\n      <ImportExcelButton\r\n        onFileSelect={handleFileUpload}\r\n        disabled={importing}\r\n        className=\"bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-2 rounded\"\r\n      />\r\n      <button\r\n        onClick={() => navigate(\"/kiosk-plans/create\")}\r\n        className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60\"\r\n        disabled={loading || importing}\r\n      >\r\n        ➕ Tạo mới kế hoạch\r\n      </button>\r\n    </div>\r\n\r\n    {importing && (\r\n      <div className=\"mb-4 text-sm text-gray-500 text-right\">\r\n        Đang import...\r\n      </div>\r\n    )}\r\n\r\n    {/* Form tạo inline (nếu bật) */}\r\n    {showCreateForm && (\r\n      <CreatePlanForm\r\n        onSubmit={handleCreateNew}\r\n        onCancel={() => setShowCreateForm(false)}\r\n      />\r\n    )}\r\n\r\n    {/* Bảng kế hoạch */}\r\n    <KioskPlanTable\r\n      data={plans}\r\n      onDelete={handleDelete}\r\n      onEdit={(plan) => console.log(\"Edit:\", plan)}\r\n      onView={handleView}\r\n    />\r\n  </div>\r\n);\r\n\r\n};\r\n\r\nexport default KioskPlanPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}